<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Project Ne10: building.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ne10_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project Ne10
   </div>
   <div id="projectbrief">An Open Optimized Software Library Project for the ARM Architecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">building.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# Building Ne10</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;## Prerequisites</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Ne10 uses [CMake](https://cmake.org/) to manage the project&#39;s build process in a toolchain-independent, cross-platform manner. As such, you will need CMake installed to build Ne10. It can typically be obtained via a package manager (for example, with `sudo apt-get install cmake`), but can otherwise be built from source. More information about CMake is available at [cmake.org](https://cmake.org/).</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;## Native compilation on \*nix platforms</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;As CMake does most of the cross-platform heavy lifting, Ne10 can be natively compiled on \*nix systems by running just a few simple commands:</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;```bash</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;cd $NE10_PATH                       # Change directory to the location of the Ne10 source</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;mkdir build &amp;&amp; cd build             # Create the `build` directory and navigate into it</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;export NE10_LINUX_TARGET_ARCH=armv7 # Set the target architecture (can also be &quot;aarch64&quot;)</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;cmake -DGNULINUX_PLATFORM=ON ..     # Run CMake to generate the build files</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;make                                # Build the project</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;```</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;This process, if completed successfully, will yield the `libNE10.a` static library file in the `$NE10_PATH/build/modules/` directory. In addition, a sample program `NE10_test_static` compiled with this static library will be generated in `$NE10_PATH/build/samples/`.</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;You can also generate a dynamic, shared library file by passing CMake the `-DNE10_BUILD_SHARED=ON` option. This generates a handful of `*.so` files in the same directory as the static library file, in addition to the dynamically linked `NE10_test_dynamic` sample program.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;By default, the release version of the library is built. The debug version can instead be produced by passing the `-DDEBUG=ON` option to CMake. Note also that the target architecture can be varied by modifying the `NE10_LINUX_TARGET_ARCH` environment variable (or, overriding this, the `-DNE10_LINUX_TARGET_ARCH=$ARCH` CMake option).</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;## Cross compilation on \*nix platforms...</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;### ...for other general \*nix platforms</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;Cross-compiling Ne10 for \*nix platforms is similar to native compilation, but using a cross-compilation toolchain. A boilerplate toolchain file `GNUlinux_config.cmake` is present in the root directory of the project to allow for cross-compilation using the Linaro GCC ARM toolchain (obtained, for example, via `sudo apt-get install gcc-arm-linux-gnueabihf`), but this can also be modified to work with other toolchains. Using this augments the compilation process to look something like the following:</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;```bash</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;cd $NE10_PATH</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;mkdir build &amp;&amp; cd build</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;export NE10_LINUX_TARGET_ARCH=armv7                      # Can also be &quot;aarch64&quot;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;cmake -DCMAKE_TOOLCHAIN_FILE=../GNUlinux_config.cmake ..</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;make</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;```</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;The products of the build are identical to that of native compilation, with the generated library files in `$NE10_PATH/build/modules/`. The dynamic and debug versions of the library can also be produced using the same CMake options as in native compilation. When running the `NE10_test_dynamic` program produced from compilation of the shared library, keep in mind that the library file must be in a known location such that it can be properly loaded and used (for example, by setting the `LD_LIBRARY_PATH` environment variable appropriately).</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;It&#39;s also worth keeping in mind that Ne10 uses some GAS (GNU Assembler) syntax, which can make building with other compilers — such as the LLVM-based `clang` — a bit awkward if these files are included in the build. This is dealt with in the build instructions for common platforms (below) where appropriate, translating the problematic syntax into supported equivalents, but may require more involved CMake configuration changes for more obscure compilation environments.</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;Additionally, for systems without hardware floating point support, the appropriate compilation options should be added to the `CMAKE_C_FLAGS` and `CMAKE_ASM_FLAGS` variables in the root `CMakeLists.txt` file. For example, `-mfloat-abi=softfp -mfpu=neon`.</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;### ...for Android</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;As Android is itself a \*nix platform, all the information about compilation to general \*nix platforms applies. Android is a particularly common use case for Ne10, however, and so the project provides a pre-configured CMake toolchain file especially for compilation using Android&#39;s Native Development Kit (NDK). Thus, to cross-compile for Android, the following steps can be used:</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;```bash</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;cd $NE10_PATH</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;mkdir build &amp;&amp; cd build</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;export ANDROID_NDK=/absolute/path/of/android-ndk</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;export NE10_ANDROID_TARGET_ARCH=armv7                           # Can also be &quot;aarch64&quot;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;cmake -DCMAKE_TOOLCHAIN_FILE=../android/android_config.cmake ..</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;make</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;```</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;This Android toolchain file also uses two additional environment variables which can be set as appropriate for the target:</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;- `ANDROID_API_LEVEL` specifies the Android API level.</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    - This defaults to the value 14, but must be greater than or equal to 21 for AArch64 targets.</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;- `ARM_ANDROID_TOOLCHAIN_VERSION` specifies the GCC version to be used.</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    - This defaults to 4.6, but must be greater than or equal to 4.8 for AArch64 targets.</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;### ...for iOS</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;As iOS is itself a \*nix platform, all the information about compilation to general \*nix platforms applies. Like with Android, iOS is an especially common use case for Ne10, and so a pre-configured CMake toolchain file is provided to make the compilation process easier. It is assumed within this that iOS builds will be performed using macOS with a copy of Xcode installed.</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;As well as selecting the correct compilation tools, the iOS toolchain file also activates infrastructure within the CMake configuration files to translate any problematic GAS assembly syntax into a form that `clang` can process. Thus, to cross-compile for iOS, the following steps can be used:</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;```bash</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;cd $NE10_PATH</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;mkdir build &amp;&amp; cd build</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;export IOS_DEVELOPER_PATH=/absolute/path/of/ios/developer/path</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;export NE10_IOS_TARGET_ARCH=armv7                               # Can also be &quot;aarch64&quot;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;cmake -DCMAKE_TOOLCHAIN_FILE=../ios/ios_config.cmake ..</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;make</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;```</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;With the default Xcode install path, the `IOS_DEVELOPER_PATH` variable should be set to `/Applications/Xcode.app/Contents/Developer`.</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;The infrastructure surrounding the iOS platform configuration also allows for an additional option `MIN_IOS_VER` to be specified to CMake (e.g. `-DMIN_IOS_VER=5.0`) to specify the minimum supported iOS version. When targetting iOS versions older than 7.0, setting this variable to 7.0 will result in a runtime error.</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;In the case that CMake gives a warning regarding the `CMAKE_OSX_SYSROOT` variable, please ensure that `IOS_DEVELOPER_PATH` is set correctly, as the former variable is derived from the latter in the iOS toolchain file. If necessary, this SDK path can be set explicitly by directly modifying the `ios_config.cmake` file.</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;## Building the unit tests</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;Ne10 has a number of unit tests, built around a modified version of the testing framework &quot;seatest&quot;. Particularly, the project has three different modes of testing:</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;- Conformance testing (also called smoke testing), to check if the library works correctly.</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;- Regression testing, which is similar to conformance testing but is aimed more specifically at testing whether the library still operates correctly after a change.</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;- Performance testing, which gives an indication of how quickly the library performs certain tasks.</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;These can be built by specifying the `-DNE10_BUILD_UNIT_TEST=ON` option to CMake in addition to one of `-DNE10_SMOKE_TEST=ON`, `-DNE10_REGRESSION_TEST=ON`, and `-DNE10_PERFORMANCE_TEST=ON`. The corresponding test programs for each Ne10 module will then be generated in the `$NE10_PATH/build/test/` directory.</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;## Building the Android and iOS demo applications</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;Ne10 also comes with two demo applications, one for Android, and another for iOS. Both demos need the Ne10 library to be installed on the system, which can be accomplished by running `make install` after building the project. Following this, the project files can be opened in Xcode or the Android SDK as usual. Devices are expected to have Internet access in order to run the demo applications correctly.</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 4 2016 16:18:27 for Project Ne10 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
